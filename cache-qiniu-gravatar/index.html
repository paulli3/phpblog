<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head profile="http://gmpg.org/xfn/11"><meta charset="UTF-8"><meta http-equiv="Content-Type" content="text/html" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>将Gravatar头像缓存到七牛镜像服务器并解决参数问题 &#8211; WordPress迷</title><meta name="description" content="将Gravatar头像缓存到七牛镜像服务器并解决参数问题 - 作者: WordPress迷,首发于WordPress迷"><link rel="stylesheet" type="text/css" href="http://wpmee.b0.upaiyun.com/wp-content/themes/Loostrive/style.css" /><link rel="stylesheet" type="text/css" href="http://wpmee.b0.upaiyun.com/wp-content/themes/Loostrive/images/lightbox/pirobox.css" target="_blank" /><link rel="alternate" type="application/rss+xml" title="WordPress迷 RSS Feed" href="http://www.wpmee.com/feed/" /><link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" /><script type='text/javascript' src='http://wpmee.b0.upaiyun.com/wp-content/themes/Loostrive/js/jquery.min.js?ver=3.9.1'></script><link rel='prev' title='如何禁用WordPress主题以及插件的更新提示？' href='/disable-plugin-theme-updates-installation-wordpress/' /><link rel='next' title='简洁双栏wordpress博客主题：Rcloud最新版' href='/rcloud/' /><link rel='canonical' href='/cache-qiniu-gravatar/' /><link rel='shortlink' href='/?p=812' /><script type="text/javascript" src="http://cbjs.baidu.com/js/m.js"></script></head><body class="custom-background"> <div id="head" class="row"> <div class="container row"> <div class="row"> <div id="topbar"> <ul id="toolbar" class="menu"><li><a rel="nofollow" href="/guestbook/">报错？建议？留言？</a></li><li><a title="WordPress相关投稿" rel="nofollow" href="/tougao/">投稿</a></li><li><a rel="nofollow" href="/wordpress-host/">主机</a></li></ul> </div> <div id="rss"> <ul> <li><a href="http://www.wpmee.com/feed/" target="_blank" class="icon1" title="欢迎订阅WordPress迷"></a></li> <li><a href="http://www.wpmee.com/sitemaps/" target="_blank" class="icon5" title="百度站点地图"></a></li> <li><a href="http://www.wpmee.com/sitemap.xml" target="_blank" class="icon6" title="站点地图"></a></li> <li><a href="http://www.wpmee.com/i?k=q" target="_blank" class="icon4" title="通过邮箱订阅本站" rel="nofollow"></a></li> </ul> </div> </div> </div> <div class="clear"></div> <div class="container"> <div id="blogname" class="third"> <h1 class="logo">WordPress迷</h1> </div> <div class="banner push-right"> <a style="width:508px;line-height:30px;font-size:24px;display: block;background-color: #fbfbfb;border: 2px dashed #bbb;text-align: center;color: red;" href="http://www.wpmee.com/i?k=ydy" rel="nofollow" target="_blank">易多云免备案虚拟主机，新用户免费试用15天，一键安装Wordpress</a> </div> </div> <div class="clear"></div> </div> <div class="mainmenus container"> <div class="mainmenu"> <div class="topnav"> <a href="http://www.wpmee.com" title="网站首页" class="home_none" rel="nofollow">首页</a> <ul id="menus"> <li><a title="WordPress博客主题" href="/blogtheme/">博客主题</a></li><li><a title="WordPress企业主题" href="/wpcompany/">企业主题</a></li><li><a title="WordPress CMS主题" href="/wpcms/">CMS主题</a></li><li><a title="WordPress图片主题" href="/wppic/">图片主题</a></li><li><a title="WordPress淘宝客主题" href="/tbk/">淘宝客主题</a></li><li><a title="WordPress插件" href="/plugins/">WordPress插件</a></li><li class="current-post-ancestor current-menu-parent"><a title="WordPress教程" href="/wpcourse/">WordPress教程</a></li> </ul> <ul class="menu-right"> <li class="menu-search"> <a href="javascript:;" id="menu-search" title="搜索" rel="nofollow"></a> <div class="menu-search-form "> <form action="http://www.wpmee.com" method="get"> <input name="s" type="text" id="search" value="" maxlength="150" placeholder="请善用搜索" x-webkit-speech> </form> </div> </li> </ul> <!-- menus END --> </div> </div> <div class="clear"></div> </div> <div class="container"> <div class="row"> <div class="subsidiary box"> <div class="bulletin fourfifth"> <span class="sixth">当前位置：</span><a href="http://www.wpmee.com" class="gray">WordPress主题</a> &gt; <a href="/wpcourse/" title="查看WordPress教程中的全部文章">WordPress教程</a> &gt; 将Gravatar头像缓存到七牛镜像服务器并解决参数问题 </div> </div> </div> <div class="mainleft" id="content"> <div class="article_container row box"> <h1>将Gravatar头像缓存到七牛镜像服务器并解决参数问题</h1> <div class="article_info"> <span class="info_author info_ico">WordPress迷</span> <span class="info_category info_ico"><a href="/wpcourse/" title="查看WordPress教程中的全部文章" rel="category tag">WordPress教程</a></span> <span class="info_date info_ico">03-24</span> <span class="info_views info_ico">444</span> <span class="info_comment info_ico"><a href="/cache-qiniu-gravatar/#comments" title="《将Gravatar头像缓存到七牛镜像服务器并解决参数问题》上的评论">9</a></span> </div> <div class="clear"></div> <div class="context"> <div id="post_content"><div class='warning-msg'>本站使用阿里云主机，独立IP、不限流量、速度快、稳定的可靠云服务器，有利于SEO！<a href='http://www.wpmee.com/i?k=a' target='_blank' nofollow='nofollow' style='color:#F25637;'>戳我了解</a>！</div><p>在之前一直使用的默认的get_avatar函数来获取评论者的头像，发现速度并不理想，因为gravatar的服务器在美国，所有有时候全部网页文件都打开了就是只有头像一直在转啊转，于是有了这篇<strong><a title="wordpress教程" href="http://www.wpmee.com/wpcourse/" target="_blank">wordpress教程</a></strong>：<a title="WordPress教程：Gravatar头像缓存到本地" href="http://www.wpmee.com/wordpress-avatar-cahe/" target="_blank">Gravatar头像缓存到本地</a>，当然这里放到自己服务器也是挺不错的。</p><p>但是如果你或许因为各种原因不想使用了，目前我就是因为free-cookie的问题，可以百度一下，或者是新手觉得这个操作太麻烦了，各种权限，新建文件夹之类的。</p><p>那为什么不使用多说的镜像呢？原因很简单，多说不稳定，时常抽风。</p><p>所以今天的主题就是利用七牛云存储的镜像功能，来实现头像的缓存，并且不修改源文件的方法来解决参数问题，也就是头像的大小问题。</p><h2>通过七牛云存储 缓存加速Gravatar 头像教程</h2><p>首先、如果你还没有七牛云存储的账号，你可以通过我的链接去申请，我将获得免费的5GB流量，七牛的申请地址：<a title="申请七牛云存储账号" href="https://portal.qiniu.com/signup?code=3laqnsyfvidzm" target="_blank" rel="nofollow">https://portal.qiniu.com/signup?code=3laqnsyfvidzm</a></p><p>接下来，我们将对七牛的空间进行设置。因为过于简单，这里我复制devework的一些教程：</p><p><strong>一、新建空间。</strong>登陆七牛云存储 开发者后台，新建个空间，比如Jeff 新建个名为“gravatar”的空间（要设置为公开），对应的二级域就是gravatar.qiniudn.com。</p><p style="text-align: center;"><img class="aligncenter" alt="七牛缓存wordpress头像" src="http://wpmeeimg.b0.upaiyun.com/2014/03/bdff4a603bce038e29d7d541311e1bc2.jpg" alt="将Gravatar头像缓存到七牛镜像服务器并解决参数问题" width="570" height="320" /></p><p style="text-align: center;"><strong>二、源站加速。</strong>点击该空间的“空间设置”—“源站加速”—“一键加速”，输入多说所在的 gravatar.duoshuo.com<br /><img class="aligncenter" alt="七牛缓存wordpress头像" src="http://wpmeeimg.b0.upaiyun.com/2014/03/77a24633d7e21e00cc71cc72a53a6362.jpg" alt="将Gravatar头像缓存到七牛镜像服务器并解决参数问题" width="621" height="294" /></p><p>本步骤是镜像多说缓存Gravatar 头像的地址，你也可以直接镜像Gravatar官方的 www.gravatar.com 。</p><h2>修改主题文件</h2><p><strong>接下来就是在七牛云存储中利用图片处理的参数来设定头像的大小尺寸。我这里选择的是“-”中划线。</strong></p><p>最后就是将一下代码丢到你的<a title="wordpress主题" href="http://www.wpmee.com" target="_blank">wordpress主题</a>的functions.php中：</p><p>function wpmee_get_avatar($avatar, $id_or_email, $size='40', $default, $alt='') {<br />$email = $id_or_email-&gt;comment_author_email;<br />$email_hash = md5( strtolower( trim( $email ) ) );<br />$grav_url = "http://<strong><span style="color: #ff0000;">wpmee</span></strong>.qiniudn.com/avatar/" .<br />$email_hash ."-". $size;<br />$my_avatar = "&lt;img src='$grav_url' alt='{$alt}' class='avatar avatar-{$size} photo' height='{$size}' width='{$size}' /&gt;";<br />return $my_avatar;<br />}<br />add_filter( 'get_avatar', 'wpmee_get_avatar', 10, 3 );</p><p>注意修改成你要的头像尺寸，我这里是40，也就是我的七牛自定义的图片样式名称，将其中的wpmee改成你自己的镜像的二级域名，因为本人是免费的所以流量不多。</p><p>最后的输出格式就是这样：http://wpmee.qiniudn.com/avatar/50ad321e53732e7b5a6593c3223fa9b0-<span style="color: #ff0000;">40</span></p><p>当然，这段代码是我东拼西凑搞出来的，具体其他参数以及其他功能需要自己DIY，反正我测试是木有问题的。。。有问题欢迎提出来，大家一起共同学习！</p><p>教程参考：http://devework.com/qiniu-cache-accelerate-gravatar.html</p><p>更新，参考wordpress源文件放个比较全面的版本，这个跟修改源文件差不多的感觉了，但是可以直接丢到functions.php里：</p><p>//头像缓存之七牛镜像多说源<br />function my_get_avatar($avatar, $id_or_email, $size='40', $default, $alt='') {<br />if ( ! get_option('show_avatars') )<br />return false;</p><p>if ( false === $alt)<br />$safe_alt = '';<br />else<br />$safe_alt = esc_attr( $alt );</p><p>if ( !is_numeric($size) )<br />$size = '40';<br />$email = '';<br />if ( is_numeric($id_or_email) ) {<br />$id = (int) $id_or_email;<br />$user = get_userdata($id);<br />if ( $user )<br />$email = $user-&gt;user_email;<br />} elseif ( is_object($id_or_email) ) {<br />if ( ! empty( $id_or_email-&gt;comment_type ) &amp;&amp; ! in_array( $id_or_email-&gt;comment_type, (array) $allowed_comment_types ) )<br />return false;<br />if ( ! empty( $id_or_email-&gt;user_id ) ) {<br />$id = (int) $id_or_email-&gt;user_id;<br />$user = get_userdata($id);<br />if ( $user )<br />$email = $user-&gt;user_email;<br />}<br />if ( ! $email &amp;&amp; ! empty( $id_or_email-&gt;comment_author_email ) )<br />$email = $id_or_email-&gt;comment_author_email;<br />} else {<br />$email = $id_or_email;<br />}<br />$email_hash = md5( strtolower( trim( $email ) ) );<br />$host = sprintf( "http://wpmee.qiniudn.com", ( hexdec( $email_hash[0] ) % 2 ) );<br />$out = "$host/avatar/".$email_hash.'-'.$size;<br />$out = str_replace( '&amp;#038;', '&amp;amp;', esc_url( $out ) );<br />$avatar = "&lt;img alt='{$safe_alt}' src='{$out}' class='avatar avatar-{$size} photo' height='{$size}' width='{$size}' /&gt;";</p><p>return $avatar;<br />}<br />add_filter( 'get_avatar', 'my_get_avatar', 10, 3 );</p><div class='clear'></div><div style='margin: 15px 0 0 10px;text-align:center;'><a href='http://www.wpmee.com/i?k=3loc' target='_blank' rel='nofollow' title='wordpress优质免备案主机推荐'><img height='90px' width='650px' src='http://wpmeeimg.b0.upaiyun.com/2014/04/3loc-banner.jpg' alt='专业WordPress主机' width='650px' height='90px'></a></div><div class='clear'></div><div class='warning-msg'>请尊重我们的辛苦付出，如需转载WordPress迷的文章，请加上本文<strong>锚链接</strong>，鄙视各种无耻的采集行为！<br>因本站开启了缓存，如需购买收费资源，请按住Ctrl+F5强制刷新一次即可。注：收费资源为虚拟物品，购买之后无法退款，请考虑好在购买！<br>如果发现免费主题无法下载，请将本站加入广告屏蔽白名单，当然您也可以点击广告帮助本站更好的发展。多谢您的理解。</div></div> <div class="clear"></div> <div class="article_tags"> <div class="tagcloud"> <span>标签</span><a href="/tag/wordpress%e4%bc%98%e5%8c%96/" rel="tag">wordpress优化</a> <a href="/tag/wordpress%e6%95%99%e7%a8%8b/" rel="tag">wordpress教程</a> </div> </div> <span class="baishare"> <!-- Baidu Button BEGIN --> <div class="bdsharebuttonbox"> <a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间"></a> <a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a> <a href="#" class="bds_tqq" data-cmd="tqq" title="分享到腾讯微博"></a> <a href="#" class="bds_bdhome" data-cmd="bdhome" title="分享到百度新首页"></a> <a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a> <a href="#" class="bds_renren" data-cmd="renren" title="分享到人人网"></a> <a href="#" class="bds_douban" data-cmd="douban" title="分享到豆瓣网"></a> <a href="#" class="bds_kaixin001" data-cmd="kaixin001" title="分享到开心网"></a> <a href="#" class="bds_mshare" data-cmd="mshare" title="分享到一键分享"></a> <a href="#" class="bds_more" data-cmd="more"></a> </div> <!-- Baidu Button END --> </span> </div> </div> <div class="box row"> <div style="float:left;"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 文章下面打横幅 --><ins class="adsbygoogle" style="display:inline-block;width:728px;height:90px" data-ad-client="ca-pub-5881598510039871" data-ad-slot="7225975343"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div><div style="float:left;"><script type="text/javascript">BAIDU_CLB_fillSlot("888581");</script></div> </div> <div> <ul class="post-navigation row"> <div class="post-previous twofifth"> 上一篇 <br> <a href="/disable-plugin-theme-updates-installation-wordpress/" rel="prev">如何禁用WordPress主题以及插件的更新提示？</a> </div> <div class="post-next twofifth"> 下一篇 <br> <a href="/go-to-url/" rel="next">WordPress评论链接跳转以及实现特定的链接跳转教程</a> </div> </ul> </div> <div class="article_container row box article_related"> <div class="related"> <ul> <li class="related_box" > <a href="/wordpress-links-gra/" title="WordPress带头像的友情链接页面制作教程" target="_blank"> <div class="r_pic"> <img src="http://wpmeeimg.b0.upaiyun.com/2014/06/20140625150034.jpg!s" alt="WordPress带头像的友情链接页面制作教程" /> </div> <div class="r_title"> WordPress带头像的友情链接页面制作教程 </div> </a> </li> <li class="related_box" > <a href="/wordpress-admin-button/" title="如何给wordpress后台编辑框添加自定义按钮？" target="_blank"> <div class="r_pic"> <img src="http://wpmeeimg.b0.upaiyun.com/2014/06/f46e32f0cc28d63798bbb5104cb01f2a.jpg!s" alt="如何给wordpress后台编辑框添加自定义按钮？" /> </div> <div class="r_title"> 如何给wordpress后台编辑框添加自定义按钮？ </div> </a> </li> <li class="related_box" > <a href="/remove-open-sans/" title="禁用wordpress后台的谷歌字体的加载，禁止后台加载google fonts" target="_blank"> <div class="r_pic"> <img src="http://wpmee.b0.upaiyun.com/wp-content/themes/Loostrive/images/noimage.gif" alt="禁用wordpress后台的谷歌字体的加载，禁止后台加载google fonts" /> </div> <div class="r_title"> 禁用wordpress后台的谷歌字体的加载，禁止后台加载google fonts </div> </a> </li> <li class="related_box" > <a href="/aotu-url/" title="给wordpress文章中的URL路径自动加上链接地址" target="_blank"> <div class="r_pic"> <img src="http://wpmeeimg.b0.upaiyun.com/2014/05/u6854902233265919088fm23gp0.jpg" alt="给wordpress文章中的URL路径自动加上链接地址" /> </div> <div class="r_title"> 给wordpress文章中的URL路径自动加上链接地址 </div> </a> </li> <li class="related_box" > <a href="/user-last-login/" title="WordPress制作会员中心必备：记录和显示会员最后登录的时间" target="_blank"> <div class="r_pic"> <img src="http://wpmee.b0.upaiyun.com/wp-content/themes/Loostrive/images/noimage.gif" alt="WordPress制作会员中心必备：记录和显示会员最后登录的时间" /> </div> <div class="r_title"> WordPress制作会员中心必备：记录和显示会员最后登录的时间 </div> </a> </li> <li class="related_box" > <a href="/fu-ck-spam/" title="禁止wordpress黑名单中的垃圾评论提交到数据库" target="_blank"> <div class="r_pic"> <img src="http://wpmeeimg.b0.upaiyun.com/2014/05/fuckspam.jpg" alt="禁止wordpress黑名单中的垃圾评论提交到数据库" /> </div> <div class="r_title"> 禁止wordpress黑名单中的垃圾评论提交到数据库 </div> </a> </li> </ul> </div> </div> <div class="clear"></div> <div id="comments_box"> <!-- You can start editing here. --><div class="row box"> <h3 id="comments">网友评论<span class="red">9</span>条</h3> <div class="navigation push-right"> <div class="pagination"> </div> </div> <ol class="commentlist"> <li class="comment even thread-even depth-1" id="comment-2256"> <div id="div-comment-2256" class="comment-body hreview"> <div class="comment-author vcard reviewer"> <img alt='' src='http://wpmee.qiniudn.com/avatar/ba83fa02fc4b2ba621514941307e21be-40' class='avatar avatar-40 photo' height='40' width='40' /> <div class="floor">5楼 </div><strong class="fn"><a id="commentauthor-2256" class="url" href="/i?k=aHR0cDovL2ltbW1tbS5jb20=" rel="external nofollow" target="_blank">林木木</a></strong>: </div> <dive class="description"><p>顺利搞定啦～ http://immmmm.com/use-qiniu-cache-gravatar.html</p></dive> <div class="clear"></div><span class="datetime">2014-07-13 下午3:57 </span> <span class="reply"><a class='comment-reply-link' href='/cache-qiniu-gravatar/?replytocom=2256#respond' onclick='return addComment.moveForm("div-comment-2256", "2256", "respond", "812")'>[回复]</a></span> </div></li><li class="comment odd alt thread-odd thread-alt depth-1" id="comment-2076"> <div id="div-comment-2076" class="comment-body hreview"> <div class="comment-author vcard reviewer"> <img alt='' src='http://wpmee.qiniudn.com/avatar/3bbd170c6ad1c26e0d926d1d164e5227-40' class='avatar avatar-40 photo' height='40' width='40' /> <div class="floor">4楼 </div><strong class="fn"><a id="commentauthor-2076" class="url" href="/i?k=aHR0cDovL2FydGljdWx5LmNvbQ==" rel="external nofollow" target="_blank">清心涟漪</a></strong>: </div> <dive class="description"><p>用最后代码修改成功，只是主题的首页只能显示默认头像，正文的评论头像都正常。</p></dive> <div class="clear"></div><span class="datetime">2014-06-24 下午1:27 </span> <span class="reply"><a class='comment-reply-link' href='/cache-qiniu-gravatar/?replytocom=2076#respond' onclick='return addComment.moveForm("div-comment-2076", "2076", "respond", "812")'>[回复]</a></span> </div><ul class="children"><li class="comment byuser comment-author-wpmee bypostauthor even depth-2" id="comment-2077"> <div id="div-comment-2077" class="comment-body hreview"> <div class="comment-author vcard reviewer"> <img alt='' src='http://wpmee.qiniudn.com/avatar/50ad321e53732e7b5a6593c3223fa9b0-40' class='avatar avatar-40 photo' height='40' width='40' /> <div class="floor"> </div><strong class="fn"><a id="commentauthor-2077" class="url" href="/i?k=aHR0cDovL3d3dy53cG1lZS5jb20=" rel="external nofollow" target="_blank">WordPress迷</a></strong>: <span class='comment_admin'>站长</span></div> <dive class="description"><p>是有你说的这些问题哈。如果你有更好的方案的话也可以在这贴出来。</p></dive> <div class="clear"></div><span class="datetime">2014-06-24 下午1:28 </span> <span class="reply"><a class='comment-reply-link' href='/cache-qiniu-gravatar/?replytocom=2077#respond' onclick='return addComment.moveForm("div-comment-2077", "2077", "respond", "812")'>[回复]</a></span> </div></li></ul><!-- .children --></li><li class="comment odd alt thread-even depth-1" id="comment-1741"> <div id="div-comment-1741" class="comment-body hreview"> <div class="comment-author vcard reviewer"> <img alt='' src='http://wpmee.qiniudn.com/avatar/ea6ec351508e7050582b3b0c3e652830-40' class='avatar avatar-40 photo' height='40' width='40' /> <div class="floor">地板 </div><strong class="fn"><a id="commentauthor-1741" class="url" href="/i?k=aHR0cDovL3d3dy5kZWp1bjguY29t" rel="external nofollow" target="_blank">德均吧</a></strong>: </div> <dive class="description"><p>怎么弄成26 64 96 这三种了哦 不是40吗？</p></dive> <div class="clear"></div><span class="datetime">2014-05-19 上午1:38 </span> <span class="reply"><a class='comment-reply-link' href='/cache-qiniu-gravatar/?replytocom=1741#respond' onclick='return addComment.moveForm("div-comment-1741", "1741", "respond", "812")'>[回复]</a></span> </div></li><li class="comment even thread-odd thread-alt depth-1" id="comment-1506"> <div id="div-comment-1506" class="comment-body hreview"> <div class="comment-author vcard reviewer"> <img alt='' src='http://wpmee.qiniudn.com/avatar/44199a2fc768ae8363c98ec59ffe8a69-40' class='avatar avatar-40 photo' height='40' width='40' /> <div class="floor">板凳 </div><strong class="fn"><a id="commentauthor-1506" class="url" href="/i?k=aHR0cDovL2J1bmVuZ2JhLmNvbQ==" rel="external nofollow" target="_blank">有点蓝</a></strong>: </div> <dive class="description"><p>果然在七牛~我也试试去</p></dive> <div class="clear"></div><span class="datetime">2014-05-09 下午2:53 </span> <span class="reply"><a class='comment-reply-link' href='/cache-qiniu-gravatar/?replytocom=1506#respond' onclick='return addComment.moveForm("div-comment-1506", "1506", "respond", "812")'>[回复]</a></span> </div></li><li class="comment odd alt thread-even depth-1" id="comment-1505"> <div id="div-comment-1505" class="comment-body hreview"> <div class="comment-author vcard reviewer"> <img alt='' src='http://wpmee.qiniudn.com/avatar/44199a2fc768ae8363c98ec59ffe8a69-40' class='avatar avatar-40 photo' height='40' width='40' /> <div class="floor">沙发 </div><strong class="fn"><a id="commentauthor-1505" class="url" href="/i?k=aHR0cDovL2J1bmVuZ2JhLmNvbQ==" rel="external nofollow" target="_blank">有点蓝</a></strong>: </div> <dive class="description"><p>测试一下头像去哪儿了</p></dive> <div class="clear"></div><span class="datetime">2014-05-09 下午2:53 </span> <span class="reply"><a class='comment-reply-link' href='/cache-qiniu-gravatar/?replytocom=1505#respond' onclick='return addComment.moveForm("div-comment-1505", "1505", "respond", "812")'>[回复]</a></span> </div><ul class="children"><li class="comment byuser comment-author-wpmee bypostauthor even depth-2" id="comment-1507"> <div id="div-comment-1507" class="comment-body hreview"> <div class="comment-author vcard reviewer"> <img alt='' src='http://wpmee.qiniudn.com/avatar/50ad321e53732e7b5a6593c3223fa9b0-40' class='avatar avatar-40 photo' height='40' width='40' /> <div class="floor"> </div><strong class="fn"><a id="commentauthor-1507" class="url" href="/i?k=aHR0cDovL3d3dy53cG1lZS5jb20=" rel="external nofollow" target="_blank">WordPress迷</a></strong>: <span class='comment_admin'>站长</span></div> <dive class="description"><p>去试一试吧。</p></dive> <div class="clear"></div><span class="datetime">2014-05-09 下午2:54 </span> <span class="reply"><a class='comment-reply-link' href='/cache-qiniu-gravatar/?replytocom=1507#respond' onclick='return addComment.moveForm("div-comment-1507", "1507", "respond", "812")'>[回复]</a></span> </div><ul class="children"><li class="comment odd alt depth-3" id="comment-1513"> <div id="div-comment-1513" class="comment-body hreview"> <div class="comment-author vcard reviewer"> <img alt='' src='http://wpmee.qiniudn.com/avatar/44199a2fc768ae8363c98ec59ffe8a69-40' class='avatar avatar-40 photo' height='40' width='40' /> <div class="floor"> </div><strong class="fn"><a id="commentauthor-1513" class="url" href="/i?k=aHR0cDovL2J1bmVuZ2JhLmNvbQ==" rel="external nofollow" target="_blank">有点蓝</a></strong>: </div> <dive class="description"><p>回来报告，没成功。用的第一种方法，可能哪里设置的不对了。</p></dive> <div class="clear"></div><span class="datetime">2014-05-09 下午4:18 </span> <span class="reply"><a class='comment-reply-link' href='/cache-qiniu-gravatar/?replytocom=1513#respond' onclick='return addComment.moveForm("div-comment-1513", "1513", "respond", "812")'>[回复]</a></span> </div><ul class="children"><li class="comment byuser comment-author-wpmee bypostauthor even depth-4" id="comment-1514"> <div id="div-comment-1514" class="comment-body hreview"> <div class="comment-author vcard reviewer"> <img alt='' src='http://wpmee.qiniudn.com/avatar/50ad321e53732e7b5a6593c3223fa9b0-40' class='avatar avatar-40 photo' height='40' width='40' /> <div class="floor"> </div><strong class="fn"><a id="commentauthor-1514" class="url" href="/i?k=aHR0cDovL3d3dy53cG1lZS5jb20=" rel="external nofollow" target="_blank">WordPress迷</a></strong>: <span class='comment_admin'>站长</span></div> <dive class="description"><p>额，我用的自己的方法哈，完全可以哦。</p></dive> <div class="clear"></div><span class="datetime">2014-05-09 下午4:19 </span> <span class="reply"><a class='comment-reply-link' href='/cache-qiniu-gravatar/?replytocom=1514#respond' onclick='return addComment.moveForm("div-comment-1514", "1514", "respond", "812")'>[回复]</a></span> </div></li></ul><!-- .children --></li></ul><!-- .children --></li></ul><!-- .children --></li> </ol> <div id="respond_box"> <div id="respond"> <h3>发表评论</h3> <div class="cancel-comment-reply"> <small><a rel="nofollow" id="cancel-comment-reply-link" href="/cache-qiniu-gravatar/#respond" style="display:none;">点击这里取消回复。</a></small> </div> <form action="http://www.wpmee.com/wp-comments-post.php" method="post" id="commentform"> <div id="comment-author-info"> <ul class="comment_input"> <label for="author"><span class="input-prepend">昵称</span></label> <input type="text" name="author" id="author" class="" value="" size="22" tabindex="1" /> <label for="email"><span class="input-prepend">邮箱</span></label> <input type="email" name="email" id="email" class="" value="" size="22" tabindex="2" /> <label for="url"><span class="input-prepend">网址</span></label> <input type="text" name="url" id="url" class="" value="" size="22" tabindex="3" /> </ul> </div> <div class="clear"></div> <div class="comt-box"> <textarea name="comment" id="comment" class="comt-area" tabindex="4" cols="50" rows="5" onkeydown="if(event.ctrlKey&amp;&amp;event.keyCode==13){document.getElementById('submit').click();return false};"></textarea> <div class="comt-ctrl"> <span class="comt-num">还能输入<em>210</em>个字</span> <input class="comt-submit" name="submit" type="submit" id="submit" tabindex="5" value="发布评论" /> <input type='hidden' name='comment_post_ID' value='812' id='comment_post_ID' /><input type='hidden' name='comment_parent' id='comment_parent' value='0' /> </div> </div> <script type="text/javascript"> //Crel+Enter //<![CDATA[ jQuery(document).keypress(function(e){ if(e.ctrlKey && e.which == 13 || e.which == 10) { jQuery(".submit").click(); document.body.focus(); } else if (e.shiftKey && e.which==13 || e.which == 10) { jQuery(".submit").click(); } }) // ]]> </script> </form> <div class="clear"></div> </div> </div> </div> <script type="text/javascript"> function ajacpload(){$('#comment_pager a').click(function(){ var wpurl=$(this).attr("href").split(/(\?|&)action=AjaxCommentsPage.*$/)[0]; var commentPage = 1; if (/comment-page-/i.test(wpurl)) { commentPage = wpurl.split(/comment-page-/i)[1].split(/(\/|#|&).*$/)[0]; } else if (/cpage=/i.test(wpurl)) { commentPage = wpurl.split(/cpage=/)[1].split(/(\/|#|&).*$/)[0]; }; //alert(commentPage);//获取页数 var postId =$('#cp_post_id').text(); //alert(postId);//获取postid var url = wpurl.split(/#.*$/)[0]; url += /\?/i.test(wpurl) ? '&' : '?'; url += 'action=AjaxCommentsPage&post=' + postId + '&page=' + commentPage; //alert(url);//看看传入参数是否正确 $.ajax({ url:url, type: 'GET', beforeSend: function() { document.body.style.cursor = 'wait'; var C=0.7;//修改下面的选择器，评论列表div的id，分页部分的id $('#thecomments,#comment_pager').css({opacity:C,MozOpacity:C,KhtmlOpacity:C,filter:'alpha(opacity=' + C * 100 + ')'}); var loading='Loading'; $('#comment_pager').html(loading); }, error: function(request) { alert(request.responseText); }, success:function(data){ var responses=data.split(''); $('#thecomments').html(responses[0]); $('#comment_pager').html(responses[1]); var C=1; //修改下面的选择器，评论列表div的id，分页部分的id $('#thecomments,#comment_pager').css({opacity:C,MozOpacity:C,KhtmlOpacity:C,filter:'alpha(opacity=' + C * 100 + ')'}); $('#cmploading').remove(); document.body.style.cursor = 'auto'; ajacpload();//自身重载一次 //single_js();//需要重载的js，注意 $body.animate( { scrollTop: $('#comment_header').offset().top - 200}, 1000); }//返回评论列表顶部 }); return false; });} </script> </div> </div><div id="sidebar"> <div class="widget box row"> <div id="tab-title"> <div class="tab"> <ul id="tabnav"> <li class="selected">最新文章</li> <li>热评文章</li> </ul> </div> <div class="clear"></div> </div> <div id="tab-content"> <ul> <li><a href='/youleb/'>多风格响应式wordpress主题：youleb</a></li> <li><a href='/teahouse/'>Teahouse wordpress主题</a></li> <li><a href='/rclean/'>清新干净的双栏wordpress博客主题：Rclean</a></li> <li><a href='/mm2014/'>WordPress图片展示主题MM2014</a></li> <li><a href='/36kr/'>[￥119]PCKr – 36Kr风格响应式WordPress资讯主题</a></li> <li><a href='/wordpress-links-gra/'>WordPress带头像的友情链接页面制作教程</a></li> <li><a href='/skyfrit/'>双栏自适应淡色系WordPress主题Skyfrit</a></li> <li><a href='/haha/'>WordPress笑话主题模板分享</a></li> <li><a href='/swdl/'>机械/工程类产品WordPress企业专用主题下载</a></li> <li><a href='/windyflat/'>彩色扁平化单栏博客主题WindyFlat</a></li></ul> <ul class="hide"><li><a href= "/36kr/" target="_blank" rel="bookmark" title="[￥119]PCKr – 36Kr风格响应式WordPress资讯主题 (11条评论)" >[￥119]PCKr – 36Kr风格响应式WordPress资讯主题</a></li><li><a href= "/rclean/" target="_blank" rel="bookmark" title="清新干净的双栏wordpress博客主题：Rclean (4条评论)" >清新干净的双栏wordpress博客主题：Rclean</a></li><li><a href= "/teahouse/" target="_blank" rel="bookmark" title="Teahouse wordpress主题 (4条评论)" >Teahouse wordpress主题</a></li><li><a href= "/mm2014/" target="_blank" rel="bookmark" title="WordPress图片展示主题MM2014 (3条评论)" >WordPress图片展示主题MM2014</a></li><li><a href= "/wordpress-links-gra/" target="_blank" rel="bookmark" title="WordPress带头像的友情链接页面制作教程 (2条评论)" >WordPress带头像的友情链接页面制作教程</a></li><li><a href= "/youleb/" target="_blank" rel="bookmark" title="多风格响应式wordpress主题：youleb (2条评论)" >多风格响应式wordpress主题：youleb</a></li></ul> </div> </div><div class="widget box row"><h3>随机主题</h3> <ul class="line"> <li class="w_box"><a href="/zsqx/" title="WordPress淘宝客模板：紫色清新商城主题zsqx"> <div class="r_pic"> <img src="http://wpmeeimg.b0.upaiyun.com/2014/03/2014-03-15_101401-800x989.jpg!s" alt="WordPress淘宝客模板：紫色清新商城主题zsqx" /> </div> <div class="w_title"> WordPress淘宝客模板：紫色清新商城主题zsqx </div></a></li> <li class="w_box"><a href="/leiphone2/" title="WordPress主题：仿新版雷锋网LeiPhone2"> <div class="r_pic"> <img src="http://wpmeeimg.b0.upaiyun.com/2014/02/2014-02-17_213431-528x1000.jpg!s" alt="WordPress主题：仿新版雷锋网LeiPhone2" /> </div> <div class="w_title"> WordPress主题：仿新版雷锋网LeiPhone2 </div></a></li> <li class="w_box"><a href="/forceful/" title="WordPress新闻杂志博客主题：Forceful[汉化]"> <div class="r_pic"> <img src="http://wpmeeimg.b0.upaiyun.com/2014/03/2014-03-08_103330-800x923.jpg!s" alt="WordPress新闻杂志博客主题：Forceful[汉化]" /> </div> <div class="w_title"> WordPress新闻杂志博客主题：Forceful[汉化] </div></a></li> <li class="w_box"><a href="/dream-chaser/" title="大气的wordpress企业主题：Dream Chaser"> <div class="r_pic"> <img src="http://wpmeeimg.b0.upaiyun.com/2014/03/5983fda387b38695dd00b51c897bb91a.jpg!s" alt="大气的wordpress企业主题：Dream Chaser" /> </div> <div class="w_title"> 大气的wordpress企业主题：Dream Chaser </div></a></li> <li class="w_box"><a href="/zanblog/" title="wordpress主题：大气的博客主题Zanblog"> <div class="r_pic"> <img src="http://wpmeeimg.b0.upaiyun.com/2014/02/zanblog-800x578.jpg!s" alt="wordpress主题：大气的博客主题Zanblog" /> </div> <div class="w_title"> wordpress主题：大气的博客主题Zanblog </div></a></li> <li class="w_box"><a href="/wp-candy/" title="WordPress图片主题：糖果女巫WP-Candy主题"> <div class="r_pic"> <img src="http://wpmeeimg.b0.upaiyun.com/2014/02/ZuDhM-555x1000.jpg!s" alt="WordPress图片主题：糖果女巫WP-Candy主题" /> </div> <div class="w_title"> WordPress图片主题：糖果女巫WP-Candy主题 </div></a></li> </ul></div><div class="widget box row"> <div class="textwidget"><a href="http://www.wpmee.com/i?k=hc" target="_blank" rel="nofollow" title="wordpress主机推荐"><img src="http://wpmeeimg.b0.upaiyun.com/2014/04/hczj.jpg" alt="WordPress专业主机" width="300px" height="250px"></a></div> </div> <div id="sidebar-follow"> <div class="widget box row"> <div class="textwidget"><div class="followbd"><script type="text/javascript">BAIDU_CLB_fillSlot("888521");</script></div></div> </div><div class="widget box row"> <div class="textwidget"><a style="width:296px;line-height:50px;font-size:24px;display: block;background-color: #fbfbfb;border: 2px dashed #bbb;text-align: center;color: red;" href="http://www.wpmee.com/i?k=i" rel="nofollow">本站使用主题Loostrive <br>点击购买</a></div> </div> </div></div></div><div id="footer"> <div class="copyright"> <p> Copyright &copy; 2013-2014 <a href="http://www.wpmee.com/" rel="nofollow"><strong>WordPress迷</strong></a> <a href="http://www.wpmee.com/i?k=Law" target="_blank" rel="nofollow">【本站法律顾问】：ITLAW-庄毅雄律师</a><br > <a href="http://www.wpmee.com/i?k=upyun" target="_blank" rel="nofollow" title="由又拍云提供静态CDN加速"><img src="http://pic.wpmee.com/upyun.png" style="margin-top: -3px;" alt="由又拍云提供静态CDN加速" width="24px" height="24px"></a> <a href="http://www.wpmee.com/i?k=a" target="_blank" rel="nofollow" title="运行在阿里云"><img src="http://gtms01.alicdn.com/tps/i1/T1zl_ZFmdbXXcn152t-98-20.png" style="margin-bottom:-5px" alt="运行在阿里云" width="98px" height="20px"></a> </p> </div></div></div><!--gototop--><div id="tbox"> <a id="home" rel="nofollow" href="http://www.wpmee.com"></a> <a id="pinglun" href="#commentform" rel="nofollow"></a> <a id="gotop" href="javascript:void(0)" rel="nofollow"></a> </div><script type="text/javascript" src="http://wpmee.b0.upaiyun.com/wp-content/themes/Loostrive/js/loostrive.js"></script><script type="text/javascript" src="http://wpmee.b0.upaiyun.com/wp-content/themes/Loostrive/comments-ajax.js"></script> <script type="text/javascript" src="http://wpmee.b0.upaiyun.com/wp-content/themes/Loostrive/images/lightbox/pirobox.js"></script><!--百度分享--> <script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"1","bdMiniList":false,"bdPic":"","bdStyle":"1","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=86835285.js?cdnversion='+~(-new Date()/36e5)];</script><!--百度分享结束--><div style="display:none;"><script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_5875455'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s22.cnzz.com/stat.php%3Fid%3D5875455' type='text/javascript'%3E%3C/script%3E"));</script></div></body></html><!-- hyper cache: 35f04e7b90f608c8262d9d5b31fdcc2a 14-07-22 04:59:36 -->